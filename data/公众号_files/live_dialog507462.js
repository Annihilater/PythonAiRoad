define("pages/modules/media_dialog/poi_dialog/poi_dialog.tpl.js",[],function(e,i,t){return'<mp-dialog wrap-class="weui-desktop-dialog_geography-location" title="This is a dialog" v-model="dialogShow" @close="closeDialog">  <div slot="header">插入位置</div>  <mp-step :step="currentStep" v-show="!isEdit">    <mp-step-item title="选择位置"></mp-step-item>    <mp-step-item title="插入位置"></mp-step-item>  </mp-step>  <div class="weui-desktop-dialog__content step_one" v-show="currentStep === 1">    <mp-city-select      :city-value="cityValue"      :search-complete="searchComplete"      @city-change="cityChange"      @update-result="updateResult"      @city-data-init="cityDataInit"    ></mp-city-select>            <div class="geography-location_info" ref="map">            <div class="geography-location_info__left resultPanel" v-if="showSearchResult" @scroll="searchResultScroll" ref="searchResultDiv">        <template v-if="locationList.length > 0">          <ul class="geography-location__wrp" ref="searchResultUl" style="position: relative;">            <li              :class="[\'geography-location__item\', (index === selectedIdx ? \'active\' : \'\')]"              v-for="(item, index) in locationList"              :key="item.sosomap_poi_uid"              @click="onResultLocationClick(index)">              <div class="geography-location__item__left">                <p class="geography-location__title">{{index + 1}}. {{item.branch_name}}</p>                <p class="geography-location__detail">{{item.address}}</p>              </div>                          <div class="geography-location__selected-icon__wrp">                <i class="geography-location__selected-icon" v-if="index === selectedIdx"></i>              </div>                          </li>          </ul>          <mp-pagination            :total-num="totalNum"            :per-page="perPage"            :current="currentPage"            @page-change="pageChange"          ></mp-pagination>        </template>        <div class="geography-location_no-result" v-else>          <p>暂无搜索结果。</p>          <p>建议插入临近地点，或<a class="create_new_location__link" href="https://lbs.qq.com/dev/console/merchantLabel/index" target="_blank">创建新门店</a>。</p>        </div>      </div>      <div class="map-canvas geography-location_big-img"></div>    </div>  </div>  <div class="weui-desktop-dialog__content step_two" v-show="currentStep === 2">    <div class="weui-desktop-dialog__content_item">        <div class="weui-desktop-dialog__poi_desc">{{poiInfo.name}} &nbsp;{{poiInfo.address}}</div>            </div>    <div class="weui-desktop-dialog__content_item">      <div class="content_item_title">选择展示方式</div>      <div class="content_item_content">        <mp-radio-group v-model="poiInfo.type">          <div class="location_form_item">            <mp-radio :value="1">文字</mp-radio>            <mp-input placeholder="输入地址"              clearable              v-model.trim="poiInfo.content"              @clear="clearContent">              <p slot="description">点击文字会打开指定位置的地图信息</p>            </mp-input>          </div>          <div class="location_form_item space_top">            <mp-radio :value="2">地图卡片</mp-radio>            <div class="location_form_card">              <p class="location_form_card_title">{{poiInfo.name}}</p>              <p class="location_form_card_desc">{{poiInfo.address}}</p>                            <div class="geography-location_img_wrp">                <img class="geography-location_img" :src="poiInfo.img" />              </div>            </div>          </div>        </mp-radio-group>      </div>    </div>  </div>  <div slot="footer">    <template v-if="currentStep === 1">      <mp-button @click="close">取消</mp-button>      <mp-button type="primary" @click="next" :disabled="selectedIdx < 0">下一步</mp-button>    </template>    <template v-else>      <mp-button @click="prev" v-show="!isEdit">上一步</mp-button>      <mp-button type="primary" @click="submit" :loading="submitBtnLoading" :disabled="submitBtnDisabled">确认</mp-button>    </template>  </div></mp-dialog>'})
define("3rd/sosomap/map.js",["3rd/sosomap/event.js","pages/app/modules/top_tips/top_tips.js","3rd/sosomap/utils.js"],function(e,t,o){"use strict"
var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]
for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},i=function(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}
function s(e,t){for(var o=0;o<t.length;o++){var i=t[o]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var p=e("3rd/sosomap/event.js"),c=e("pages/app/modules/top_tips/top_tips.js"),l=e("3rd/sosomap/utils.js").area2scope,u=(i(m,[{key:"init",value:function(){this.initDom(),this.initMap(),this.initComponent(),this.initServer(this.opt),this.bindEvent(),this.notifyResize(),this.inited=!0}},{key:"initDom",value:function(){this.$mainDiv=this.container.querySelector(".mainDiv"),this.$result=this.container.querySelector(".resultPanel"),this.$mapDiv=this.container.querySelector(".map-canvas")}},{key:"initMap",value:function(){var e,t=this.opt.latitude,o=this.opt.longitude,i=(r(e={navigationControlOptions:{position:soso.maps.ControlPosition.LEFT_TOP},zoom:13,mapTypeControl:!1,draggable:!1,scrollwheel:!0,disableDoubleClickZoom:!1,keyboardShortcuts:!1},"mapTypeControl",!1),r(e,"panControl",!1),r(e,"zoomControl",!0),r(e,"scaleControl",!1),e)
void 0===(void 0===t?"undefined":n(t))||void 0===(void 0===o?"undefined":n(o))||0==+t&&0==+o?this.map=new soso.maps.Map(this.$mapDiv[0],i):this.map=new soso.maps.Map(this.$mapDiv,a({center:new soso.maps.LatLng(t,o)},i))}},{key:"initComponent",value:function(){}},{key:"initServer",value:function(){var t=this,o=this.opt
this.geoFirst=!0,this.cityService=new soso.maps.CityService({complete:function(e){o.latlng=e.detail.latLng,t.map.setCenter(o.latlng),p.trigger("sosomap:searchLocalCity",e)},error:function(){o.latlng=new soso.maps.latLng(o.latitude,o.longitude)}}),this.geocoderService=new soso.maps.Geocoder({complete:function(e){!0===t.geoFirst&&(t.geoFirst=!1,t.inited=!0,o.latlng,setTimeout(function(){p.trigger("sosomap:inited")},0)),p.trigger("sosomap:getaddrcomplete",e)},error:function(){c.$tipsErr("仅支持中国（含港澳台地区）地址，请重新定位具体地址。"),o.latlng?t.map.panTo(o.latlng):t.map.panTo(new soso.maps.LatLng(o.latitude,o.longitude))}}),this.locationServer=new soso.maps.Geocoder({complete:function(e){p.trigger("sosomap:locationcomplete",e)},error:function(e){p.trigger("sosomap:locationerror",e)}})}},{key:"bindEvent",value:function(){var o=this
p.on("search:complete",function(e){var t=e.detail.pois[0]
t&&4==t.type&&o.map&&o.map.panTo(t.latLng),p.trigger("sosomap:searchcomplete",e)}).on("search:error",function(e){p.trigger("sosomap:searcherror",e)}).on("search:searching",function(){p.trigger("sosomap:searching")})}},{key:"onidleonce",value:function(e){soso.maps.event.addListenerOnce(this.map,"idle",e)}},{key:"onidle",value:function(e){soso.maps.event.addListener(this.map,"idle",e)}},{key:"getAddress",value:function(e){this.geocoderService.getAddress(e||this.map.getCenter())}},{key:"setCenter",value:function(e){this.map.setCenter(e)}},{key:"getZoom",value:function(){this.map.getZoom()}},{key:"panTo",value:function(e){this.map.panTo(e)}},{key:"callmap",value:function(e){var t=[].slice.call(arguments,1)
if("function"==typeof this.map[e])return this.map[e].apply(this.map,t)}},{key:"getLocation",value:function(e){if("string"!=typeof e){var t=e.finalAddress
t=e.province==e.city?(e.city||"")+(e.district||"")+(t||""):(e.province||"")+(e.city||"")+(e.district||"")+(t||""),this.locationServer.getLocation(t)}else this.locationServer.getLocation(e)}},{key:"search",value:function(e){e.scope||e.area&&(e.scope=l(e.area))
var t=this.opt
e.pageCapacity||(e.pageCapacity=t.pageCapacity),this.searchService.search(e.keyword,e)}},{key:"notifyResize",value:function(){if(this.$mainDiv){var e=this.container.clientWidth,t=this.container.clientHeight
this.$mainDiv.style.height=t+"px",this.$mainDiv.style.width=e+"px"}}},{key:"destory",value:function(){this.unbindEvent()}},{key:"unbindEvent",value:function(){soso.maps.event.clearListeners(this),soso.maps.event.clearListeners(this.map)}}]),m)
function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this.opt=a({latlng:null,pageCapacity:10,latitude:39.916528,longitude:116.397129},e),this.container=e.container,this.init()}o.exports=u})
define("3rd/sosomap/utils.js",[],function(t,e,r){"use strict"
var i={formatAddress:function(t){if(!t||!t.addressComponents)return{}
var e=t.addressComponents,r={country:e.country||"",province:e.province||"",city:e.city||"",district:e.district||"",street:e.streetNumber||e.street||e.town+e.village||""}
return r.district==r.street&&(r.street=""),r.province===r.city&&(r.city=r.district,r.district=""),r.finalAddress=r.street,r},fixaddr:function(t){t.address?t.street=t.finalAddress=t.address.replace(t.province+t.city+t.district,"").replace("中国",""):t.province&&(t.address=t.province+t.city+t.district+(t.street||t.finalAddress))},area2addr:function(t){var e,r
return 2==t.length?e=r=t[0].data.fullname:(e=t[0].data.fullname,r=t[1].data.fullname),{province:e,city:r,district:t[t.length-1]&&t[t.length-1].data.fullname}},area2scope:function(t){var e=""
return t[0]&&t[0].data&&t[0].data.fullname&&(e=t[0].data.fullname),util.isTerritory(e)||t[1]&&t[1].data&&t[1].data.fullname&&(e=t[1].data.fullname),e},isTerritory:function(t){return 0<=territoryCity.indexOf(","+t+",")},getLocation:function(t,e){if("string"!=typeof e){var r=e.finalAddress
r=e.province==e.city?(e.city||"")+(e.district||"")+(r||""):(e.province||"")+(e.city||"")+(e.district||"")+(r||""),t.getLocation(r)}else t.getLocation(e)}}
r.exports=i})
define("pages/modules/media_dialog/video_snap_dialog/videoSnapDialog4Web1.js",["pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.js"],function(e,a,i){"use strict"
function s(){return{defaultShow:!1,isShow:!1,insertedNum:0}}i.exports={getParams:s,bindEvent:function(a){a.eventBus.$on("requireInsertVideoSnapDialog",function(){a.isRequired||(e("pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.js"),a.isRequired=!0)}),a.eventBus.$on("showInsertVideoSnapDialog",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}
a.eventBus.$emit("requireInsertVideoSnapDialog"),function(e,a){var i=s()
for(var o in a)void 0!==i[o]&&(i[o]=a[o])
for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e.params[n]=i[n])
e.params.isShow=!0,e.params.defaultShow=!0}(a,e),a.eventBus.$emit("update-component",{key:"mp-video-snap-dialog",params:a.params})})},close:function(e){e.eventBus.$emit("showInsertVideoSnapDialog_callback",e.data)}}})
define("pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.js",["pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.css.js","vue-weui/src/dialog/dialog.js","vue-weui/src/pagination/pagination.js","vue-weui/src/search/search.js","vue-weui/src/form/form.js","vue-weui/src/form/form_item.js","vue-weui/src/input/input.js","pages/modules/media/video_snap_item/video_snap_item.js","pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.tpl.js","pages/modules/utils/cgi.js","pages/modules/common/emoji/emoji.js","pages/modules/utils/replace_html.js"],function(e,t,i){"use strict"
function s(e){return function(){var a=e.apply(this,arguments)
return new Promise(function(o,c){return function t(e,i){try{var n=a[e](i),s=n.value}catch(e){return void c(e)}if(!n.done)return Promise.resolve(s).then(function(e){t("next",e)},function(e){t("throw",e)})
o(s)}("next")})}}e("pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.css.js"),e("vue-weui/src/dialog/dialog.js"),e("vue-weui/src/pagination/pagination.js"),e("vue-weui/src/search/search.js"),e("vue-weui/src/form/form.js"),e("vue-weui/src/form/form_item.js"),e("vue-weui/src/input/input.js"),e("pages/modules/media/video_snap_item/video_snap_item.js")
var n=e("pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.tpl.js"),o=e("pages/modules/utils/cgi.js"),c=e("pages/modules/common/emoji/emoji.js"),a=e("pages/modules/utils/replace_html.js")
Vue.component("mp-video-snap-dialog",{template:n,props:{value:{type:Boolean,default:!1},insertedNum:{type:Number,default:0}},data:function(){return{dialogShow:!1,isInitial:!0,recentlyUseList:[],accountList:[],feedList:[],queryValue:"",hasSearch:!1,showMoreAccount:!1,clickAccount:!1,selectedAccount:null,accountResult:null,selectedList:[],maxSelectedCount:10-this.insertedNum,inputValue:"",loading:!1,searchResult:"",loadMoreAccount:!1,noMoreAccount:!1,loadMoreFeed:!1,noMoreFeed:!1,accountDevelopments:[],submitBtnDisabled:!0,accountBuffer:"",feedBuffer:"",acctCanContinue:!0,feedCanContinue:!0,showSelected:!1,hoverItem:null,isFirstJump:!1,accountFeeds:[],isLoadingMore:!1,recentlyLoading:!0,accountDetailLoading:!0,cardItemHeight:217,accountItemHeight:100,visibleFeeds:[],lineTopHeight:0,lineBottomHeight:0,lastBeginLine:0,isFirstFeed:!0,isFirstAccount:!0,loadingFeed:!1,loadingAccount:!1}},mounted:function(){this.getRecentUseVideoAccount(),!0===this.value&&this.show()},computed:{selectedCount:function(){return this.selectedList.length},canSelect:function(){return this.selectedList.length<this.maxSelectedCount},topBarHeight:function(){return this.clickAccount?73:!this.hasSearch||this.isFirstJump||this.showMoreAccount?0:68}},watch:{dialogShow:function(e){this.$emit("input",e)},value:function(e){!0===e?this.show():this.hide()},selectedList:function(e){this.submitBtnDisabled=e.length<=0}},methods:{show:function(){!1===this.dialogShow&&(this.dialogShow=!0)},hide:function(){!0===this.dialogShow&&(this.dialogShow=!1)},dialogClose:function(){this.hide(),this.$emit("cancel")},dialogVisibleChange:function(e){e?document.getElementsByTagName("body")[0].setAttribute("style","height:100%;overflow: hidden !important"):document.getElementsByTagName("body")[0].setAttribute("style","overflow: visible")},getRecentUseVideoAccount:function(){var t=this
this.recentlyLoading=!0,o.get({url:"/cgi-bin/videosnap?action=get_used_list"},function(e){e&&e.base_resp&&0===e.base_resp.ret&&e.list&&e.list.length&&(t.recentlyUseList=e.list),t.recentlyLoading=!1})},jumpRecently:function(e){this.isInitial=!1,this.clickAccount=!0,this.isFirstJump=!0,this.visibleFeeds=[],this.selectedAccount={username:e.username},this.getAccountDevelopments()},highlightContent:function(e){return c(a.default(e,!0)).replace(/&lt;em&nbsp;class=&quot;highlight&quot;&gt;/g,'<em class="highlight">').replace(/&lt;\/em&gt;/g,"</em>").replace(/\n/g,"<br>")},searchAccountList:function(){var n=this
return new Promise(function(t,i){n.acctCanContinue&&!n.loadingAccount&&(n.loadingAccount=!0,o.get({url:"/cgi-bin/videosnap?action=search",data:{scene:1,buffer:n.accountBuffer,query:n.queryValue,count:21}},function(e){e&&e.base_resp&&0===e.base_resp.ret?(e.acct_list&&e.acct_list.length&&(e.acct_list=e.acct_list.filter(function(e){return e&&""!==e.username}),e.acct_list.forEach(function(e){e.highlightName=n.highlightContent(e.highlight_nickname)}),n.accountList=n.accountList.concat(e.acct_list),n.acctCanContinue=e.acct_continue_flag,n.acctCanContinue||(n.noMoreAccount=!0),n.accountBuffer=e.last_buff),t(e)):(n.acctCanContinue=!1,i(e)),n.loadMoreAccount=!1,n.isLoadingMore=!1,n.loadingAccount=!1}))})},searchDevelopments:function(){var n=this
return new Promise(function(t,i){n.feedCanContinue&&!n.loadingFeed&&(n.loadingFeed=!0,n.searchResult="",o.get({url:"/cgi-bin/videosnap?action=search",data:{scene:2,buffer:n.feedBuffer,query:n.queryValue,count:15}},function(e){e&&e.base_resp&&0===e.base_resp.ret?(e.feed_list&&e.feed_list.length?(e.feed_list.forEach(function(e){n.$set(e,"checked",!1)}),n.feedList=n.feedList.concat(e.feed_list),n.feedList&&n.feedList.length&&n.feedList.forEach(function(e){e.media&&0<e.media.length&&(e.type=2===e.media[0].media_type?"image":"video",e.feedUrl=e.media[0].cover_url||e.media[0].thumb_url)}),n.feedBuffer=e.last_buff,n.feedCanContinue=e.feed_continue_flag,n.isFirstFeed&&(n.isFirstFeed=!1,n.visibleFeeds=n.feedList,n.lineTopHeight=0),n.feedCanContinue||(n.noMoreFeed=!0)):(n.searchResult="暂无搜索结果",n.feedCanContinue=!1),t(e)):i(e),n.loadMoreFeed=!1,n.isLoadingMore=!1,n.loadingFeed=!1}))})},search:function(e){var t=this
e&&(this.loading=!0,this.searchResult="",this.isInitial=!1,this.hasSearch=!0,this.queryValue=e,this.accountList=[],this.feedList=[],this.feedBuffer="",this.accountBuffer="",this.feedCanContinue=!0,this.acctCanContinue=!0,this.inputValue=e,this.noMoreFeed=!1,this.noMoreAccount=!1,Promise.all([this.searchAccountList(),this.searchDevelopments()]).then(function(e){t.loading=!1,e[0].acct_list&&e[0].acct_list.length||e[1].feed_list&&e[1].feed_list.length||(t.searchResult="暂无搜索结果")}).catch(function(){t.loading=!1,t.searchResult="系统繁忙"}))},setVisibleFeeds:function(e,t){var i=0<Math.floor((e-this.topBarHeight)/this.cardItemHeight)?Math.floor((e-83)/this.cardItemHeight):0
if(i=0<i-1?i-1:0,this.lastBeginLine!==i){var n=(this.lastBeginLine=i)+5,s=4*i,o=4*n
this.visibleFeeds=t.slice(s,t<o?t.length:o),this.lineTopHeight=(0<i?i:0)*this.cardItemHeight
var c=Math.ceil(t.length/4)
this.lineBottomHeight=0<c-n?(c-n)*this.cardItemHeight:0}},throttling:function(e,t,i,n){var s=null,o=+new Date
null!==s&&clearTimeout(s)
var c=+new Date
i<=c-o?(e(n),o=c):s=setTimeout(e,t)},loadMoreFunction:function(i){var n=this
return s(regeneratorRuntime.mark(function e(){var t
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.srcElement?i.srcElement:i.target,!n.hasSearch||n.isFirstJump||n.showMoreAccount||!n.feedCanContinue){e.next=13
break}if(!(t.scrollTop+t.offsetHeight>t.scrollHeight-10)){e.next=11
break}if(n.isLoadingMore)return e.abrupt("return")
e.next=5
break
case 5:return n.isLoadingMore=!0,n.loadMoreFeed=!0,e.next=9,n.searchDevelopments()
case 9:e.next=11
break
case 11:e.next=21
break
case 13:if(!n.showMoreAccount||!n.acctCanContinue){e.next=21
break}if(!(t.scrollTop+t.offsetHeight>t.scrollHeight-10)){e.next=21
break}if(n.isLoadingMore)return e.abrupt("return")
e.next=17
break
case 17:return n.isLoadingMore=!0,n.loadMoreAccount=!0,e.next=21,n.searchAccountList()
case 21:case"end":return e.stop()}},e,n)}))()},scrollDown:function(e){var t=this
e.preventDefault(),this.throttling(function(){t.loadMoreFunction(e)},1e3,1e3,e)},firstList:function(e){return e.length<=4?e:e.slice(0,3)},middleList:function(e){return 4<e.length?6<=e.length?e.slice(3,6):e.slice(3,e.length):[]},getAccountDevelopments:function(){var t=this
this.accountResult=null,this.accountFeeds=null,this.accountDetailLoading=!0,o.get({url:"/cgi-bin/videosnap?action=get_feed_list&username="+this.selectedAccount.username},function(e){e&&e.base_resp&&0===e.base_resp.ret&&(t.accountResult=e.acct,t.accountFeeds=e.list,t.accountFeeds&&t.accountFeeds.length&&t.accountFeeds.forEach(function(e){e.nickname=t.accountResult.nickname,e.media&&0<e.media.length&&(e.type=2===e.media[0].media_type?"image":"video",e.feedUrl=e.media[0].cover_url||e.media[0].thumb_url),t.$set(e,"checked",!1)})),t.accountDetailLoading=!1})},goAccountProfile:function(e){this.clickAccount=!0,this.hasSearch=!1,this.selectedAccount=e,this.showMoreAccount=!1,this.visibleFeeds=[],this.getAccountDevelopments()},getMoreAccount:function(){this.showMoreAccount=!0,this.hasSearch=!1},goBack:function(){this.showMoreAccount=!1,this.clickAccount=!1,this.hasSearch=!0,this.showSelected=!1,this.isFirstJump?(this.visibleFeeds=[],this.isInitial=!0,this.isFirstJump=!1):this.$refs.mainView.scrollTop=0},filterByItem:function(i){var n=null
return this.selectedList.forEach(function(e,t){e.nonce_id===i.nonce_id&&(n=t)}),n},checkedChange:function(e){var t=this.filterByItem(e)
null!==t?this.selectedList.splice(t,1):this.selectedList.length<this.maxSelectedCount&&this.selectedList.push(e)},hoverChange:function(e){this.hoverItem=e},submit:function(){this.$emit("insert",this.selectedList),this.hide()},ifForbiddenUse:function(e){return 0!==e.spam_flag||1===e.ext_flag||2===e.ext_flag}}})})
define("pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.css.js", [], function (require, exports, module){module.exports = "/*How to usefont-family: 'wechatnum';*/.weui-desktop-grid {  display: -ms-flexbox;  display: flex;  -ms-flex-wrap: wrap;      flex-wrap: wrap;  margin-left: -4px;  margin-right: -4px;}.weui-desktop-grid__col {  padding: 0 4px;  box-sizing: border-box;  min-width: 0;}.channel_dialog .weui-desktop-dialog {  position: relative;}.channel_dialog em.highlight {  font-style: normal;}.channel_search_mod {  padding: 0 32px;}.channel_search_mod .weui-desktop-search {  width: 300px;  margin: 0 auto;}.channel_search_mod .channel_selected_tips {  position: absolute;  left: 40px;  bottom: 26px;  max-width: 320px;}.channel_search_breadcrumb {  margin: 0 32px 20px;}.channel_search_breadcrumb_link:before {  content: \"\";  display: inline-block;  vertical-align: middle;  width: 10px;  height: 20px;  margin-top: -0.2em;  margin-right: 5px;  -webkit-mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='10' height='20' viewBox='0 0 10 20'%3E  %3Cdefs%3E    %3Cpath id='378031f4-787b-457d-8396-a16d7c67467a-a' d='M6.323 10.358l-.884.884L.623 6.426a.83.83 0 0 1 0-1.177L5.44.433l.884.884-4.52 4.52 4.52 4.521z'/%3E  %3C/defs%3E  %3Cuse fill='%23576B95' fill-rule='evenodd' transform='matrix(1 0 0 -1 1.632 15.842)' xlink:href='%23378031f4-787b-457d-8396-a16d7c67467a-a'/%3E%3C/svg%3E\") no-repeat 50% 50%;          mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='10' height='20' viewBox='0 0 10 20'%3E  %3Cdefs%3E    %3Cpath id='378031f4-787b-457d-8396-a16d7c67467a-a' d='M6.323 10.358l-.884.884L.623 6.426a.83.83 0 0 1 0-1.177L5.44.433l.884.884-4.52 4.52 4.52 4.521z'/%3E  %3C/defs%3E  %3Cuse fill='%23576B95' fill-rule='evenodd' transform='matrix(1 0 0 -1 1.632 15.842)' xlink:href='%23378031f4-787b-457d-8396-a16d7c67467a-a'/%3E%3C/svg%3E\") no-repeat 50% 50%;  -webkit-mask-size: cover;  mask-size: cover;  background-color: currentColor;}.weui-desktop-mask-icon:before {  content: \"\";  display: inline-block;  vertical-align: middle;  margin-top: -0.2em;  -webkit-mask-size: cover;          mask-size: cover;  background-color: currentColor;}.weui-desktop-mask-icon_lock:before {  width: 16px;  height: 16px;  -webkit-mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E  %3Cpath fill-opacity='.9' fill-rule='evenodd' d='M9.867 6V4a1.867 1.867 0 0 0-3.734 0v2h3.734zm2.666.8H3.467v7.067h9.066V6.8zM8 8.667a1 1 0 0 1 .4 1.916V12h-.8v-1.417A1 1 0 0 1 8 8.667zM5.333 4a2.667 2.667 0 1 1 5.334 0v2h2c.368 0 .666.298.666.666V14a.665.665 0 0 1-.667.666H3.334A.667.667 0 0 1 2.667 14V6.666c0-.368.296-.666.667-.666h2V4z'/%3E%3C/svg%3E\") no-repeat 50% 50%;          mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E  %3Cpath fill-opacity='.9' fill-rule='evenodd' d='M9.867 6V4a1.867 1.867 0 0 0-3.734 0v2h3.734zm2.666.8H3.467v7.067h9.066V6.8zM8 8.667a1 1 0 0 1 .4 1.916V12h-.8v-1.417A1 1 0 0 1 8 8.667zM5.333 4a2.667 2.667 0 1 1 5.334 0v2h2c.368 0 .666.298.666.666V14a.665.665 0 0 1-.667.666H3.334A.667.667 0 0 1 2.667 14V6.666c0-.368.296-.666.667-.666h2V4z'/%3E%3C/svg%3E\") no-repeat 50% 50%;}.weui-desktop-mask-icon_img:before {  width: 16px;  height: 16px;  -webkit-mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E  %3Cpath fill='%23FFF' fill-rule='evenodd' d='M14.005 2.667c.358 0 .662.32.662.716v9.234c0 .397-.296.716-.662.716H1.995c-.358 0-.662-.32-.662-.716V3.383c0-.397.296-.716.662-.716h12.01zM6.004 7.293l-3.87 3.129v2.111h11.733v-1.87l-2.25-2.024-1.458 1.24.896.788h-1.18L6.003 7.293zm7.863-3.826H2.133v5.928L5.466 6.7a.887.887 0 0 1 1.101.023l2.984 2.622 1.522-1.293a.856.856 0 0 1 1.097.011l1.696 1.543v-6.14z'/%3E%3C/svg%3E\") no-repeat 50% 50%;          mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E  %3Cpath fill='%23FFF' fill-rule='evenodd' d='M14.005 2.667c.358 0 .662.32.662.716v9.234c0 .397-.296.716-.662.716H1.995c-.358 0-.662-.32-.662-.716V3.383c0-.397.296-.716.662-.716h12.01zM6.004 7.293l-3.87 3.129v2.111h11.733v-1.87l-2.25-2.024-1.458 1.24.896.788h-1.18L6.003 7.293zm7.863-3.826H2.133v5.928L5.466 6.7a.887.887 0 0 1 1.101.023l2.984 2.622 1.522-1.293a.856.856 0 0 1 1.097.011l1.696 1.543v-6.14z'/%3E%3C/svg%3E\") no-repeat 50% 50%;}.weui-desktop-mask-icon_praise:before {  width: 15px;  height: 15px;  margin-top: -0.34em;  margin-right: 5px;  -webkit-mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='15' viewBox='0 0 15 15'%3E  %3Cpath fill='%23FFF' fill-rule='evenodd' d='M12.053 7.903a2.375 2.375 0 0 0-3.385-3.332c-.12.12-.272.267-.458.441l-.514.485-.514-.485a22.048 22.048 0 0 1-.458-.441 2.375 2.375 0 0 0-3.359 0 2.373 2.373 0 0 0-.034 3.324l4.365 4.365 4.357-4.357zM2.835 4.04a3.125 3.125 0 0 1 4.42 0c.113.115.26.257.441.427.18-.17.328-.312.442-.427a3.125 3.125 0 0 1 4.453 4.385L8.138 12.88a.625.625 0 0 1-.884 0L2.801 8.426a3.126 3.126 0 0 1 .034-4.386z'/%3E%3C/svg%3E\") no-repeat 50% 50%;          mask: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='15' viewBox='0 0 15 15'%3E  %3Cpath fill='%23FFF' fill-rule='evenodd' d='M12.053 7.903a2.375 2.375 0 0 0-3.385-3.332c-.12.12-.272.267-.458.441l-.514.485-.514-.485a22.048 22.048 0 0 1-.458-.441 2.375 2.375 0 0 0-3.359 0 2.373 2.373 0 0 0-.034 3.324l4.365 4.365 4.357-4.357zM2.835 4.04a3.125 3.125 0 0 1 4.42 0c.113.115.26.257.441.427.18-.17.328-.312.442-.427a3.125 3.125 0 0 1 4.453 4.385L8.138 12.88a.625.625 0 0 1-.884 0L2.801 8.426a3.126 3.126 0 0 1 .034-4.386z'/%3E%3C/svg%3E\") no-repeat 50% 50%;}.channel_search_status_initial {  padding-top: 125px;  padding-bottom: 240px;}.channel_history_mod_wrp {  margin: 20px auto 0;  text-align: center;  max-width: 64%;}.channel_history_list {  display: inline;}.channel_history_label,.channel_history_item {  display: inline-block;  vertical-align: top;  margin: 0 10px;}.channel_history_label {  font-weight: 400;}.channel_history_item {  cursor: pointer;  color: #576B95;}.channel_search_result_mod {  margin-top: 32px;}.channel_search_result_mod .channel_search_profile_list .channel_search_profile {  max-width: 224px;  width: 31.46067416%;  margin-right: 12px;}.channel_search_result_mod .channel_search_profile_list .channel_search_profile:last-child {  width: 188px;  margin-right: 0;}.channel_search_profile {  padding: 12px 16px;  box-sizing: border-box;  background: #F6F8F9;  border-radius: 8px;  cursor: pointer;}.channel_search_profile .weui-desktop-icon-lock {  color: #9A9A9A;}.channel_search_profile_avatar {  width: 40px;  height: 40px;  border-radius: 50%;  margin-right: 12px;  vertical-align: middle;}.channel_search_profile_nickname_wrp {  display: -ms-flexbox;  display: flex;  -ms-flex-align: center;      align-items: center;}.channel_search_profile_nickname {  width: auto;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  word-wrap: normal;  font-weight: 400;  display: block;}.channel_search_profile_desc {  font-size: 12px;  width: auto;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  word-wrap: normal;  color: #9A9A9A;}.channel_search_profile_more .channel_search_profile_avatar {  margin-right: -16px;  width: 38px;  height: 38px;  border: 2px solid white;}.channel_search_profile_more .channel_search_profile_avatar:last-child {  margin-right: 0;}.channel_search_card_area {  margin-top: 32px;}.channel_search_card_list .weui-desktop-grid__col {  -ms-flex: 0 0 20%;      flex: 0 0 20%;}.channel_selected_tips {  position: absolute;  bottom: 34px;  cursor: pointer;}.channel_selected_tips a {  margin-left: 10px;}.channel_search_profile_mod {  width: 712px;  margin: 20px auto;}.channel_search_profile_mod .channel_search_profile_list .weui-desktop-grid__col {  -ms-flex: 0 0 33.33333333%;      flex: 0 0 33.33333333%;}.channel_search_profile_mod .channel_search_profile_list .weui-desktop-grid__col {  padding-left: 10px;  padding-right: 10px;}.channel_search_profile_mod .channel_search_profile {  font-size: 14px;  margin-bottom: 20px;}.channel_search_card_mod .channel_search_profile {  background: transparent;  padding: 0;  max-width: 400px;  cursor: initial;}.channel_search_card_mod .channel_search_profile_nickname_wrp + .weui-desktop-tips {  margin-left: 20px;}";});define("pages/modules/media/video_snap_item/video_snap_item.js",["pages/modules/media/video_snap_item/video_snap_item.tpl.js","pages/modules/media/video_snap_item/video_snap_item.css.js"],function(e,t,i){"use strict"
var s=e("pages/modules/media/video_snap_item/video_snap_item.tpl.js")
e("pages/modules/media/video_snap_item/video_snap_item.css.js"),Vue.component("mp-video-snap-item",{template:s,props:{item:{type:Object,default:{}},hoverItem:{type:String,default:""},canSelect:{type:Boolean,default:!0},accountForbid:{type:Boolean,default:!1}},data:function(){return{currentHoverItem:null}},computed:{isForbid:function(){return 1===this.item.ext_flag||2===this.item.ext_flag||0!==this.item.spam_flag||this.accountForbid}},watch:{hoverItem:function(e){this.currentHoverItem=e}},methods:{hoverItemChange:function(e){this.isForbid||this.canSelect&&this.$emit("itemHoverChange",e.nonce_id)},checkedChange:function(){!this.item.checked&&!this.canSelect||this.isForbid||(this.item.checked=!this.item.checked,this.$emit("itemCheckedChange",this.item))}}})})
define("pages/modules/media/video_snap_item/video_snap_item.tpl.js",[],function(e,c,a){return'<div :class="{    \'channel_search_card\': true,    \'channel_search_card_selected\': item.checked  }" @mouseover="hoverItemChange(item)" @mouseleave="hoverItemChange" @click.stop.prevent="checkedChange">  <div class="channel_search_card_hd">    <div class="channel_search_card_thumb" :style="`background-image: url(${item.feedUrl})`" role="img"></div>    <div class="channel_search_card_data">      <em class="weui-desktop-mask-icon weui-desktop-mask-icon_praise">{{item.like_num}}</em>      <i class="weui-desktop-mask-icon weui-desktop-mask-icon_img" v-if="item.type === \'image\'"></i>    </div>  </div>  <div class="channel_search_card_bd">    <div class="channel_search_profile weui-desktop-flex">      <img class="channel_search_profile_avatar" :src="item.head_url" alt="">      <div class="weui-desktop-flex__item">        <strong class="channel_search_profile_nickname">{{item.nickname}}</strong>      </div>    </div>    <div class="channel_search_card_desc_wrp">      <span class="channel_search_card_desc" v-if="item.desc">        {{item.desc}}      </span>    </div>  </div>  <div class="channel_search_card_ft">    <div :class="{        \'channel_search_card_status\': item.checked || currentHoverItem === item.nonce_id    }">      <mp-checkbox v-model="item.checked" v-show="currentHoverItem === item.nonce_id || item.checked"></mp-checkbox>    </div>        <div class="channel_search_card_msg" v-if="!canSelect && !item.checked"></div>            <div class="channel_search_card_msg" v-if="isForbid">      <div class="channel_search_card_msg_inner">        该视频号不可引用      </div>    </div>  </div></div>'})
define("pages/modules/media/video_snap_item/video_snap_item.css.js", [], function (require, exports, module){module.exports = "/*How to usefont-family: 'wechatnum';*/.channel_search_card {  font-size: 14px;  position: relative;  margin-bottom: 20px;  border-radius: 8px;  overflow: hidden;  background-color: #F6F8F9;}.channel_search_card .channel_search_profile {  background: transparent;  padding: 0;}.channel_search_card .channel_search_profile_avatar {  width: 22px;  height: 22px;  margin-right: 8px;}.channel_search_card:hover .channel_search_card_status,.channel_search_card.channel_search_card_selected .channel_search_card_status {  display: block;}.channel_search_card.channel_search_card_selected .channel_search_card_status {  background: rgba(7, 193, 96, 0.1);  border: 2px solid #07C160;  border-radius: 8px;  box-shadow: 0 1px 6px 0 #E4E8EB;}.channel_search_card.channel_search_card_disabled::after {  content: \"\";  display: block;  position: absolute;  left: 0;  top: 0;  right: 0;  bottom: 0;  background: rgba(255, 255, 255, 0.5);  z-index: 10;}.channel_search_card.channel_search_card_disabled:hover:before {  display: none;}.channel_search_card_hd {  position: relative;}.channel_search_card_thumb {  padding-top: 100%;  background-position: 50% 50%;  background-repeat: no-repeat;  background-size: cover;}.channel_search_card_data {  position: absolute;  bottom: 0;  left: 0;  right: 0;  padding: 8px 10px;  color: white;  font-size: 12px;  background: linear-gradient(rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.3));}.channel_search_card_data .weui-desktop-mask-icon_praise {  float: left;  font-style: normal;}.channel_search_card_data .weui-desktop-mask-icon_img {  float: right;}.channel_search_card_bd {  padding: 8px 12px 12px;}.channel_search_card_desc_wrp {  margin-top: 8px;  color: #576B95;  width: auto;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  word-wrap: normal;  min-height: 1.6em;}.channel_search_card_desc {  color: #353535;}.channel_search_card_status {  position: absolute;  left: 0;  top: 0;  bottom: 0;  right: 0;}.channel_search_card_status .weui-desktop-form__check-label {  position: absolute;  top: 12px;  left: 12px;}.channel_search_card_status .weui-desktop-icon-checkbox {  border-color: white;  background: rgba(0, 0, 0, 0.3);  width: 20px;  height: 20px;  border-radius: 1px;  vertical-align: top;}.channel_search_card_status .weui-desktop-form__checkbox:checked + .weui-desktop-icon-checkbox {  background: #07C160;  margin-left: -2px;  margin-top: -2px;}.channel_search_card_status .weui-desktop-form__checkbox:checked + .weui-desktop-icon-checkbox:before {  border-color: white;  border-width: 1.5px;  margin-top: 4px;  width: 10px;  height: 5px;}.channel_search_card_msg {  position: absolute;  top: 0;  left: 0;  width: 100%;  height: 100%;  background: rgba(255, 255, 255, 0.6);}.channel_search_card_msg .weui-desktop-icon-lock {  margin-right: 8px;}.channel_search_card_msg:hover .channel_search_card_msg_inner {  opacity: 1;  visibility: visible;}.channel_search_card_msg_inner {  opacity: 0;  visibility: hidden;  -webkit-transition: opacity .3s;  transition: opacity .3s;  padding: 8px 12px;  background: rgba(255, 255, 255, 0.8);}";});define("pages/modules/media_dialog/video_snap_dialog/video_snap_dialog.tpl.js",[],function(e,i,s){return'<mp-dialog :width="960" weui="true" v-model="dialogShow" title="插入视频号动态" wrap-class="channel_dialog" @close="dialogClose" @visible-change="dialogVisibleChange">    <div class="channel_search_breadcrumb" v-if="clickAccount || showMoreAccount">    <a class="channel_search_breadcrumb_link" href="javascript:;" @click="goBack">返回</a>  </div>  <div ref="mainView" :class="{    \'channel_search_mod\': true,     \'channel_search_status_initial\': isInitial }" :style="isInitial ? \'\' : \'height: 564px; overflow-y: scroll;\'" @scroll.stop.prevent="scrollDown">    <template v-if="!showSelected">      <mp-search v-if="!showMoreAccount && !isFirstJump && !clickAccount" placeholder="输入视频号帐号名/动态描述" :value="inputValue" @search="search"></mp-search>      <div class="channel_history_mod_wrp" v-if="isInitial">        <i v-if="recentlyLoading" class="weui-desktop-loading"></i>        <div class="channel_history_mod" v-if="isInitial && recentlyUseList.length&&!recentlyLoading">          <strong class="channel_history_label">最近使用</strong>          <ul class="channel_history_list">            <li class="channel_history_item" v-for="(item, index) in recentlyUseList" @click="jumpRecently(item)">{{item.nickname}}</li>          </ul>        </div>      </div>      <div class="channel_search_result_mod" v-if="hasSearch && !isFirstJump">        <div class="channel_search_profile_list weui-desktop-flex weui-desktop-flex_align-middle">          <div class="channel_search_profile weui-desktop-flex__item" v-for="(item, index) in firstList(accountList)" @click="goAccountProfile(item)">            <div class=" weui-desktop-flex weui-desktop-flex_align-middle">              <img class="channel_search_profile_avatar" :src="item.head_url" alt="">              <div class="weui-desktop-flex__item">                <strong class="channel_search_profile_nickname" v-html="item.highlightName"></strong>              </div>              <i class="weui-desktop-mask-icon weui-desktop-mask-icon_lock" v-if="ifForbiddenUse(item)"></i>            </div>          </div>                    <div class="channel_search_profile channel_search_profile_more" v-if="accountList.length > 4" @click="getMoreAccount">            <div class=" weui-desktop-flex weui-desktop-flex_align-middle">              <div class="weui-desktop-flex__item">                <img v-for="(item, index) in middleList(accountList)" class="channel_search_profile_avatar" :src="item.head_url" alt="">              </div>              <a href="javascript:;" class="channel_search_profile_more_access">更多</a>            </div>          </div>        </div>        <div class="channel_search_card_area">          <div class="channel_search_card_list weui-desktop-grid" v-if="feedList.length">            <template v-for="(item, index) in feedList">              <div class="weui-desktop-grid__col">                <mp-video-snap-item v-bind:key="index" :item="item" :hover-item="hoverItem" @itemCheckedChange="checkedChange" @itemHoverChange="hoverChange" :canSelect="canSelect"></mp-video-snap-item>              </div>            </template>          </div>                    <div class="weui-desktop-loadmore" v-if="loadMoreFeed"><i class="weui-desktop-loading"></i></div>          <div class="weui-desktop-loadmore weui-desktop-loadmore_end" v-if="noMoreFeed">暂无更多视频动态</div>        </div>                <div v-if="loading" class="weui-desktop-empty-tips"><i class="weui-desktop-loading"></i></div>        <div v-if="searchResult" class="weui-desktop-empty-tips">{{searchResult}}</div>      </div>            <div class="channel_search_profile_mod" v-if="showMoreAccount && !clickAccount">        <div class="channel_search_profile_area">          <div class="channel_search_profile_list weui-desktop-grid">            <div class="weui-desktop-grid__col" v-for="(item, index) in accountList">              <div class="channel_search_profile weui-desktop-flex" v-bind:key="index" @click="goAccountProfile(item)">                <div class="weui-desktop-flex weui-desktop-flex_align-middle">                  <img class="channel_search_profile_avatar" :src="item.head_url" alt="">                  <div class="weui-desktop-flex__item">                    <strong class="channel_search_profile_nickname" v-html="item.highlightName"></strong>                  </div>                  <i class="weui-desktop-mask-icon weui-desktop-mask-icon_lock" v-if="ifForbiddenUse(item)"></i>                </div>              </div>            </div>          </div>          <div class="weui-desktop-loadmore" v-if="loadMoreAccount"><i class="weui-desktop-loading"></i></div>          <div class="weui-desktop-loadmore weui-desktop-loadmore_end" v-if="noMoreAccount">已无更多</div>        </div>      </div>            <div class="channel_search_card_mod" v-if="clickAccount">        <template v-if="!accountDetailLoading">          <div class="channel_search_profile weui-desktop-flex weui-desktop-flex_align-middle">            <img class="channel_search_profile_avatar" :src="accountResult.head_url" alt="">            <div class="weui-desktop-flex__item">              <div class="channel_search_profile_nickname_wrp">                <strong class="channel_search_profile_nickname">{{accountResult.nickname}}</strong>                <span class="weui-desktop-tips weui-desktop-tips_icon" v-if="ifForbiddenUse(accountResult)">                  <i class="weui-desktop-mask-icon weui-desktop-mask-icon_lock"></i>                  该视频号不可引用                </span>              </div>              <p class="channel_search_profile_desc">{{accountResult.label}}</p>            </div>          </div>          <div class="channel_search_card_area">                      <div class="channel_search_card_list weui-desktop-grid" v-if="accountFeeds.length">              <template v-for="(item, index) in accountFeeds">                <div class="weui-desktop-grid__col">                  <mp-video-snap-item v-bind:key="index" :item="item" :hover-item="hoverItem" @itemCheckedChange="checkedChange" @itemHoverChange="hoverChange" :canSelect="canSelect" :accountForbid="ifForbiddenUse(accountResult)"></mp-video-snap-item>&nbsp;                </div>              </template>            </div>            <div class="weui-desktop-empty-tips" v-else>              该帐号暂无动态            </div>          </div>        </template>        <template v-else>          <div class="weui-desktop-empty-tips"><i class="weui-desktop-loading"></i></div>        </template>      </div>    </template>        <template v-else>      <div class="channel_search_card_area">        <div class="channel_search_card_list weui-desktop-grid" v-if="selectedList.length">          <template v-for="(item, index) in selectedList">              <div class="weui-desktop-grid__col">                <mp-video-snap-item v-bind:key="index" :item="item" :hover-item="hoverItem" @itemCheckedChange="checkedChange" @itemHoverChange="hoverChange" :canSelect="canSelect"></mp-video-snap-item>              </div>          </template>        </div>        <div class="weui-desktop-empty-tips" v-else>          暂无视频号动态        </div>      </div>    </template>  </div>  <template slot="footer" v-if="!isInitial && !showMoreAccount">    <div class="channel_selected_tips" v-if="!isInitial && !showMoreAccount">      <span @click="showSelected=true">已选择<em class="weui-desktop-highlight">{{selectedCount}}/{{maxSelectedCount}}</em>条视频号动态</span><a href="javascript:;" v-if="showSelected" @click="showSelected=false">返回全部</a>    </div>    <mp-button v-if="!isInitial && !showMoreAccount" :disabled="submitBtnDisabled" type="primary" @click="submit">插入</mp-button>  </template></mp-dialog>'})
define("pages/modules/utils/replace_html.js",[],function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
t.default=function(e,t){var n=void 0
n=t?["&","&amp;","¥","&yen;","<","&lt;",">","&gt;"," ","&nbsp;",'"',"&quot;","'","&#39;","`","&#96;"]:["&#96;","`","&#39;","'","&quot;",'"',"&nbsp;"," ","&gt;",">","&lt;","<","&yen;","¥","&amp;","&"]
for(var l=0;l<n.length;l+=2)e=e.replace(new RegExp(n[l],"g"),n[l+1])
return e}})
define("pages/editor/liveDialog4Web1.js",["pages/modules/media_dialog/live_dialog/live_dialog.js"],function(e,i,o){"use strict"
function n(){return{isShow:!1,defaultShow:!1,count:0,liveData:{}}}o.exports={getParams:n,bindEvent:function(i){i.eventBus.$on("requireLiveDialog",function(){i.isRequired||(console.log("require live"),e("pages/modules/media_dialog/live_dialog/live_dialog.js"),i.isRequired=!0)}),i.eventBus.$on("showLiveDialog",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}
i.eventBus.$emit("requireLiveDialog"),function(e,i){var o=n()
for(var a in i)void 0!==o[a]&&(o[a]=i[a])
for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e.params[t]=o[t])
e.params.isShow=!0,e.params.defaultShow=!0}(i,e),i.eventBus.$emit("update-component",{key:"mp-live-dialog",params:i.params})})},close:function(e){e.eventBus.$emit("showLiveDialog_callback",e.data)}}})
define("pages/modules/media_dialog/live_dialog/live_dialog.js",["pages/modules/media_dialog/live_dialog/live_dialog.css.js","vue-weui/src/dialog/dialog.js","vue-weui/src/button/button.js","vue-weui/src/tab/tab.js","vue-weui/src/toptips/toptips.js","vue-weui/src/checkbox/checkbox.js","pages/modules/media_dialog/live_dialog/live_dialog.tpl.js","3rd/moment/moment.js","pages/modules/utils/cgi.js","pages/modules/utils/url.js"],function(t,e,i){"use strict"
function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t("pages/modules/media_dialog/live_dialog/live_dialog.css.js"),t("vue-weui/src/dialog/dialog.js"),t("vue-weui/src/button/button.js"),t("vue-weui/src/tab/tab.js"),t("vue-weui/src/toptips/toptips.js"),t("vue-weui/src/checkbox/checkbox.js")
var o=t("pages/modules/media_dialog/live_dialog/live_dialog.tpl.js"),a=t("3rd/moment/moment.js"),l=t("pages/modules/utils/cgi.js"),n=t("pages/modules/utils/url.js")
Vue.component("mp-live-dialog",{template:o,props:{value:{type:Boolean,default:!1},count:{type:Number,default:0}},mounted:function(){var o=this
!0===this.value&&this.show(),this.list=this.list_by_start,this.$nextTick(function(){var i=document.querySelector("#js_live_room_table"),s=i.offsetHeight
i.onscroll=function(){var t=i.scrollTop,e=i.scrollHeight;-1<=s+t-e&&o.updateList()}}),this.updateList()},data:function(){var t={dialogShow:!1,sortTab:[{id:"0",name:"按计划时间排序"}],selectTab:"0",selectIndex:-1,selectIndexs:[],limit:5,isLoading:!1,isShowTips:!1,hasMore:!0,list_by_start:[],list_by_create:[],list:[],banRoomStatus:104,expireRoomStatus:107,total:0,max_count:3,url:n.fullUrl("https://mp.weixin.qq.com/cgi-bin/livelogin?1=1")}
return t},watch:{dialogShow:function(t){this.$emit("input",t)},value:function(t){!0===t?this.show():this.hide()}},computed:{canSubmit:function(){return 0<this.selectIndexs.length},showLimitTip:function(){return this.count+this.selectIndexs.length>=this.max_count}},methods:{isDisabled:function(t,e){return t.live_status===this.banRoomStatus||-1===this.selectIndexs.indexOf(e)&&this.selectIndexs.length+this.count>=this.max_count},changeSortTab:function(t){t!==this.selectTab&&(this.selectTab=t,this.refreshList(),this.selectIndex=-1,this.$forceUpdate())},changeSelectLive:function(){},updateList:function(){var i=this
if(!this.isLoading&&this.hasMore){this.isLoading=!0
var t="0"===this.selectTab?"start_time":"create_time"
l.post({url:"/cgi-bin/liveinfo?action=list",data:{offset:this.list.length,limit:this.limit,order:t}},function(t){if(t&&t.base_resp&&0==+t.base_resp.ret){var e=t.rooms.map(function(t){return i.formatItemDate(t)})
i.total=t.total,"0"===i.selectTab?i.list_by_start=i.list_by_start.concat(e):i.list_by_create=i.list_by_create.concat(e),i.refreshList(),(0===e.length||i.list.length>=i.total)&&(i.hasMore=!1),i.$forceUpdate()}else console.log("[getLiveRoom error]")
i.isLoading=!1})}},refreshList:function(){"0"===this.selectTab?this.list=this.list_by_start:this.list=this.list_by_create,0===this.list.length&&this.updateList()},submit:function(){var e=this
if(this.count+this.selectIndexs.length>this.max_count)this.isShowTips=!0
else{this.hide()
var i=[]
this.selectIndexs.forEach(function(t){i.push(e.list[t])}),this.$emit("select",i)}},getDateDesc:function(t){if(!t.start_time)return""
var e=t.start_time_desc,i=t.end_time_desc,s=e.slice(0,-5)
return s===i.slice(0,-5)&&(i=i.substr(-5)),"<p>"+s+'</p><p class="selec-live-dialog__table-cell__live-time">'+e.substr(-5)+"-"+i+"</p>"},getStatusDesc:function(t){var e,i=t.live_status
return(s(e={0:"未开始",101:"直播中",102:"未开始",103:"已结束"},this.banRoomStatus,"禁播"),s(e,105,"直播中"),s(e,106,"直播中"),s(e,this.expireRoomStatus,"已结束"),e)[i]||"异常"},formatDate:function(t){if(!t)return""
var e=(new Date).getFullYear(),i=a.unix(t).format("YYYY年M月D日HH:mm")
return+e==+i.substring(0,4)&&(i=i.substring(5)),i},formatItemDate:function(t){return t.create_time_desc=this.formatDate(t.create_time)||"",t.start_time_desc=this.formatDate(t.start_time)||"",t.end_time_desc=this.formatDate(t.end_time)||"",t},show:function(){!1===this.dialogShow&&(this.dialogShow=!0)},hide:function(){!0===this.dialogShow&&(this.dialogShow=!1)},closeDialog:function(){this.hide(),this.$emit("cancel")}}})})
